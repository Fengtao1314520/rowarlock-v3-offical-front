import{d as I,l as g,o as n,c,w as a,a as e,aq as J,A as te,h as W,p as B,f as $,g as L,ay as se,B as oe,C as re,j as M,b as h,k as T,t as S,e as z,F as N,J as y,az as ne,v as O,_ as ue,W as Q,X as ce,Y as X,$ as K,a6 as ie,a7 as de,a8 as fe,at as pe,aa as me,aA as ve,am as _e,ag as ke,ah as be,an as ye,aj as Ve,au as he,ai as ge,G as j,D as xe,ax as Ce,al as Re,z as H,aB as we,m as Te}from"./index-196f599f.js";import{e as Se,h as P,b as Ie,g as $e,r as Z,i as Ne}from"./smallThird-65f11f3b.js";import{a as x,V as Pe}from"./lazy-b7cf1284.js";import{V as Y,m as Fe,c as De}from"./VTextField-4afe3365.js";import{V as C,a as b,b as w,c as A,d as E}from"./VRow-d632b967.js";import{V as Le}from"./VAppBarNavIcon-c2544463.js";import{f as ee,m as Be,V as q}from"./forwardRefs-cd3a2d6a.js";var ae=(l=>(l.Official="Official",l.Test="Test",l.FieldTest="FieldTest",l))(ae||{}),F=(l=>(l.New="New",l.Improve="Improve",l.Fix="Fix",l))(F||{});function Ae(){let l=Z(),s=Se(),o=[];return s.forEach(t=>{for(let r=0;r<l;r++)o.push(Me(t))}),o}function Ee(l){return l.reduce((s,o)=>{const t=o.year;return s[t]||(s[t]={year:t,items:[]}),s[t].items.push(o),s},{})}function Me(l){let s={branchNumber:P(49999,89999),isHotfix:Ie(),productName:"RoWarlock",releaseDate:$e().toString(),releaseType:ae.Official,releaseVersion:`${l}-${P(1,3)}-${P(1,3)}-${P(6,10)}.${P(1e3,3e3)}`,tagNumber:Z(),tagType:"SVN"},o=[{key:"All Config Entry.pdf",value:"56445"}],t=[{id:"N-1004",type:F.New,feature:"息记录新增表情分类，查找会话表情更便捷"},{id:"N-1005",type:F.Improve,feature:"会话中的图片、视频等文件，可使用“多选”批量保存"},{id:"N-1006",type:F.Improve,feature:"远程协助可自适应屏幕大小，自如缩放，操作更便捷"},{id:"N-1007",type:F.Fix,feature:"GIF热图新增搜索功能，热图便捷搜，斗图趣无穷"}],r=[{key:"Windows 10",value:"10.0.19044.2965"},{key:"Linux Redhat",value:"7.1.4 Rel"}],u={author:"Nate Ford",createDate:Date.now().toString(),description:"RoWarlock 最新释放",modifyDate:Date.now().toString(),taskId:Ne(),title:"RoWarlock 释放",basicInfos:s,relatedConfig:o,testEnv:r,content:t};return{year:l,releaseTask:u}}const Oe={class:"font-weight-bold ml-2"},Ue={class:"font-weight-bold ml-2"},We=I({__name:"ReleaseNav",props:{releaseRecord:Array},emits:["selectSingleReleaseRecord"],setup(l,{emit:s}){const o=l,t=g(!1);let r=o.releaseRecord,u=Ee(r);function V(_){s("selectSingleReleaseRecord",_)}return(_,i)=>(n(),c(ne,{rail:t.value,onClick:i[1]||(i[1]=f=>t.value=!1),location:"right"},{default:a(()=>[e(W,{title:"释放记录","prepend-icon":"mdi-clipboard-list-outline"},{append:a(()=>[e(J,{variant:"text",icon:"mdi-chevron-left",onClick:i[0]||(i[0]=te(f=>t.value=!t.value,["stop"]))})]),_:1}),e(B),e(z,null,{default:a(()=>[(n(!0),$(N,null,L(y(u),(f,k)=>(n(),c(se,{class:"rounded-e-xl",key:k,"append-icon":"mdi-chevron-down"},{activator:a(({props:d})=>[e(W,oe(re(d)),{prepend:a(()=>[e(M,{class:"mr-0",color:"deep-purple-accent-4"},{default:a(()=>[h("mdi-sun-compass")]),_:1})]),title:a(()=>[e(x,{color:"blue-accent-2",class:"ml-2 text-h6 text-white rounded-e-xl"},{default:a(()=>[T("p",Oe,S(f.year),1)]),_:2},1024)]),_:2},1040)]),default:a(()=>[e(z,null,{default:a(()=>[(n(!0),$(N,null,L(f.items,(d,p)=>(n(),c(W,{onClick:m=>V(d),class:"py-0",key:p},{prepend:a(()=>[e(M,{class:"mr-0",color:"deep-purple-accent-4"},{default:a(()=>[h("mdi-alpha-t-box")]),_:1})]),title:a(()=>[e(x,{color:"blue-accent-2",class:"ml-2 text-body-2 text-white"},{default:a(()=>[T("p",Ue,S(d.releaseTask.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rail"]))}}),Ge={class:"text-body-2 pt-3 font-weight-bold"},je=I({__name:"CViewTextItem",props:{color:{},label:{},prefield:{},values:{}},setup(l){const s=l;return(o,t)=>(n(),c(x,null,{default:a(()=>[e(x,{class:"ma-2 d-flex"},{default:a(()=>[T("div",Ge,S(s.prefield),1),s.label?(n(),c(Y,{key:1,density:"compact","hide-details":"auto","hide-no-data":!0,placeholder:s.prefield,label:s.label,variant:"outlined",color:"primary",modelValue:s.values,"onUpdate:modelValue":t[1]||(t[1]=r=>s.values=r),clearable:!0},null,8,["placeholder","label","modelValue"])):(n(),c(Y,{key:0,density:"compact","hide-details":"auto","hide-no-data":!0,placeholder:s.prefield,variant:"outlined",color:"primary",modelValue:s.values,"onUpdate:modelValue":t[0]||(t[0]=r=>s.values=r),clearable:!0,class:"customer-90"},null,8,["placeholder","modelValue"]))]),_:1}),s.color?(n(),c(B,{key:0,thickness:2,class:"border-opacity-75",color:s.color},null,8,["color"])):O("",!0)]),_:1}))}});const D=ue(je,[["__scopeId","data-v-6bc1c212"]]),G=I({__name:"CViewTextItemList",props:{values:{},color:{}},setup(l){const s=l;return(o,t)=>(n(),c(x,null,{default:a(()=>[(n(!0),$(N,null,L(s.values,(r,u)=>(n(),c(x,{class:"ma-2",key:u},{default:a(()=>[e(D,{prefield:r.prefield,values:r.values},null,8,["prefield","values"])]),_:2},1024))),128)),s.color?(n(),c(B,{key:0,thickness:1.5,class:"border-opacity-75",color:s.color},null,8,["color"])):O("",!0)]),_:1}))}});function ze(l){switch(l){case"branchNumber":return"分支版本号:";case"isHotfix":return"是否热修复:";case"productName":return"产品名称:";case"releaseDate":return"发布日期:";case"releaseType":return"发布类型:";case"releaseVersion":return"发布版本号:";case"tagNumber":return"年度释放号:";case"tagType":return"分支类型:";default:return l}}function He(l){let s=[];return l.forEach((o,t)=>{s.push({prefield:`关联配置_${t+1}:`,label:o.key,values:o.value})}),s}function Ye(l){const s=l.reduce((o,t)=>{const{id:r,type:u,feature:V}=t,_=`${r} : ${V}`;return o[u]?o[u].push(_):o[u]=[_],o},{});return Object.entries(s).map(([o,t])=>({key:o,value:t}))}const qe={class:"text-overline mt-n2"},Je=I({__name:"CViewContentListItem",props:{values:{},icon:{}},setup(l){return(s,o)=>(n(),c(x,{border:""},{default:a(()=>[(n(!0),$(N,null,L(s.values,(t,r)=>(n(),c(C,{class:"ma-0 d-flex",key:r},{default:a(()=>[r!==0?(n(),c(B,{key:0,thickness:2,class:"border-opacity-75 mx-4",color:"indigo-accent-4"})):O("",!0),e(b,{cols:"1",class:"pb-0"},{default:a(()=>[e(M,{color:"amber-accent-4",icon:s.icon,size:"x-small"},null,8,["icon"])]),_:1}),e(b,{class:"pb-0"},{default:a(()=>[T("div",qe,S(t),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))}}),Qe={class:"text-overline mr-4 pt-1"},Xe=I({__name:"CViewContentList",props:{prefield:{},values:{}},setup(l){return(s,o)=>(n(),c(x,null,{default:a(()=>[e(x,{class:"ma-2 d-flex"},{default:a(()=>[e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[T("div",Qe,S(s.prefield),1),e(Je,{icon:"mdi-tag-multiple",values:s.values},null,8,["values"])]),_:1})]),_:1})]),_:1}),e(B,{thickness:2,class:"border-opacity-75",color:"deep-purple-accent-3"})]),_:1}))}}),Ke=Q({...ce(),...Fe()},"VForm"),Ze=X()({name:"VForm",props:Ke(),emits:{"update:modelValue":l=>!0,submit:l=>!0},setup(l,s){let{slots:o,emit:t}=s;const r=De(l),u=g();function V(i){i.preventDefault(),r.reset()}function _(i){const f=i,k=r.validate();f.then=k.then.bind(k),f.catch=k.catch.bind(k),f.finally=k.finally.bind(k),t("submit",f),f.defaultPrevented||k.then(d=>{var m;let{valid:p}=d;p&&((m=u.value)==null||m.submit())}),f.preventDefault()}return K(()=>{var i;return e("form",{ref:u,class:["v-form",l.class],style:l.style,novalidate:!0,onReset:V,onSubmit:_},[(i=o.default)==null?void 0:i.call(o,r)])}),ee(r,u)}});const ea=Q({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ie({location:"bottom"}),...de(),...fe(),...pe(),...me(),...ve(Be({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),aa=X()({name:"VSnackbar",props:ea(),emits:{"update:modelValue":l=>!0},setup(l,s){let{slots:o}=s;const t=_e(l,"modelValue"),{locationStyles:r}=ke(l),{positionClasses:u}=be(l),{scopeId:V}=ye(),{themeClasses:_}=Ve(l),{colorClasses:i,colorStyles:f,variantClasses:k}=he(l),{roundedClasses:d}=ge(l),p=g();j(t,v),j(()=>l.timeout,v),xe(()=>{t.value&&v()});let m=-1;function v(){window.clearTimeout(m);const R=Number(l.timeout);!t.value||R===-1||(m=window.setTimeout(()=>{t.value=!1},R))}function U(){window.clearTimeout(m)}return K(()=>{const[R]=q.filterProps(l);return e(q,H({ref:p,class:["v-snackbar",{"v-snackbar--active":t.value,"v-snackbar--multi-line":l.multiLine&&!l.vertical,"v-snackbar--vertical":l.vertical},u.value,l.class],style:l.style},R,{modelValue:t.value,"onUpdate:modelValue":le=>t.value=le,contentProps:H({class:["v-snackbar__wrapper",_.value,i.value,d.value,k.value],style:[r.value,f.value],onPointerenter:U,onPointerleave:v},R.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},V),{default:()=>[Ce(!1,"v-snackbar"),o.default&&e("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[o.default()]),o.actions&&e(Re,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[e("div",{class:"v-snackbar__actions"},[o.actions()])]})],activator:o.activator})}),ee({},p)}}),la=T("p",{class:"ml-2"},"更多信息",-1),ta=T("strong",null,"保存",-1),sa=I({__name:"ReleaseView",props:{releaseTask:{}},setup(l){const s=l,o=g(!1),t=g();let r=g({status:!1,text:"编辑",color:"primary",icon:"mdi-lock-outline"}),u=g([]),V=g([]),_=g([]),i=g([]);j(()=>s.releaseTask,d=>{t.value=d,u.value=[],V.value=[],i.value=[],_.value=He(d.relatedConfig);const p=Object.entries(d.basicInfos);for(const[v,U]of p){let R=ze(v);u.value.push({prefield:R,values:U})}d.testEnv.forEach(v=>{V.value.push({prefield:v.key,values:v.value})}),Ye(d.content).forEach(v=>{i.value.push({prefield:v.key,values:v.value})})},{immediate:!1,deep:!0});function f(){console.log(r.value.status),r.value.status?(r.value={status:!r.value.status,text:"编辑",color:"primary",icon:"mdi-lock-outline"},o.value=!0):r.value={status:!r.value.status,text:"保存",color:"success",icon:"mdi-lock-open-outline"}}function k(d){}return(d,p)=>(n(),$(N,null,[e(w,{color:"grey-lighten-4",flat:"",class:"ma-2"},{default:a(()=>[e(we,{border:"",density:"compact"},{default:a(()=>[e(Le,{icon:"mdi-record-player"}),e(Te,null,{default:a(()=>[h("释放记录")]),_:1}),e(Pe),e(J,{color:y(r).color,variant:"text",onClick:p[0]||(p[0]=m=>f())},{default:a(()=>[e(M,null,{default:a(()=>[h(S(y(r).icon),1)]),_:1}),h(" "+S(y(r).text),1)]),_:1},8,["color"])]),_:1}),e(w,{color:"white",flat:""},{default:a(()=>[t.value?(n(),c(Ze,{key:1,disabled:!y(r).status},{default:a(()=>[e(C,null,{default:a(()=>[e(b,{cols:"8"},{default:a(()=>[e(D,{values:t.value.title,color:"deep-purple-accent-3",prefield:"任务名称:"},null,8,["values"])]),_:1}),e(b,null,{default:a(()=>[e(D,{values:t.value.author,color:"deep-purple-accent-3",prefield:"创建人:"},null,8,["values"])]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[e(D,{values:t.value.description,color:"deep-purple-accent-3",prefield:"任务描述:"},null,8,["values"])]),_:1}),e(b,null,{default:a(()=>[e(D,{values:t.value.taskId,color:"deep-purple-accent-3",prefield:"任务id:"},null,8,["values"])]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,{cols:"7"},{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(A,null,{default:a(()=>[h("基本信息")]),_:1}),e(E,null,{default:a(()=>[e(G,{values:y(u),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(A,null,{default:a(()=>[h("测试环境")]),_:1}),e(E,null,{default:a(()=>[e(G,{values:y(V),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1}),e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg mt-4"},{default:a(()=>[e(A,null,{default:a(()=>[h("关联设置")]),_:1}),e(E,null,{default:a(()=>[e(G,{values:y(_),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(A,null,{default:a(()=>[h("更新详情")]),_:1}),e(E,null,{default:a(()=>[e(C,null,{default:a(()=>[(n(!0),$(N,null,L(y(i),(m,v)=>(n(),c(b,{key:v,class:"px-0"},{default:a(()=>[e(Xe,{prefield:m.prefield,values:m.values},null,8,["prefield","values"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[e(x,{rounded:"",border:"",color:"blue-accent-2",class:"font-weight-bold",onClick:p[1]||(p[1]=m=>(t.value.taskId,void 0))},{default:a(()=>[la]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"])):(n(),c(x,{key:0}))]),_:1})]),_:1}),e(aa,{location:"top right",timeout:1e3,color:"success",variant:"tonal",modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=m=>o.value=m)},{default:a(()=>[h(" 所有信息 "),ta,h(" 成功. ")]),_:1},8,["modelValue"])],64))}}),fa=I({__name:"ReleaseMain",setup(l){const s=Ae();let o=g({});function t(r){o.value=r.releaseTask}return(r,u)=>(n(),c(w,{flat:""},{default:a(()=>[e(We,{"release-record":y(s),onSelectSingleReleaseRecord:t},null,8,["release-record"]),y(o)?(n(),c(sa,{key:0,"release-task":y(o)},null,8,["release-task"])):O("",!0)]),_:1}))}});export{fa as default};
