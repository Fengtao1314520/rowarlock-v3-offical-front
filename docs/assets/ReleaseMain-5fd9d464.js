import{d as P,l as h,o as n,c as m,w as a,a as e,aq as q,A as te,h as W,p as M,f as S,g as L,ay as le,B as se,C as oe,j as E,b as g,k as T,t as N,e as U,F as I,J as y,az as re,v as z,W as J,X as ne,Y as Q,$ as X,a6 as ue,a7 as ce,a8 as ie,at as de,aa as fe,aA as pe,am as me,ag as ve,ah as _e,an as ke,aj as be,au as ye,ai as Ve,G as j,D as ge,ax as he,al as Re,z as H,aB as Ce,m as xe}from"./index-bbf44834.js";import{e as we,h as $,b as Se,g as Te,r as K,i as Ne}from"./smallThird-65f11f3b.js";import{a as R,f as Z,m as Ie,b as Y,V as Pe}from"./forwardRefs-8bb9c880.js";import{C as D}from"./CViewTextItem-2447684b.js";import{V as C,a as b,b as w,c as B,d as A}from"./VRow-71ba2c20.js";import{V as $e}from"./VAppBarNavIcon-40260ccc.js";import{m as De,c as Fe}from"./VTextField-9334b63e.js";var ee=(t=>(t.Official="Official",t.Test="Test",t.FieldTest="FieldTest",t))(ee||{}),F=(t=>(t.New="New",t.Improve="Improve",t.Fix="Fix",t))(F||{});function Le(){let t=K(),r=we(),s=[];return r.forEach(l=>{for(let o=0;o<t;o++)s.push(Ae(l))}),s}function Be(t){return t.reduce((r,s)=>{const l=s.year;return r[l]||(r[l]={year:l,items:[]}),r[l].items.push(s),r},{})}function Ae(t){let r={branchNumber:$(49999,89999),isHotfix:Se(),productName:"RoWarlock",releaseDate:Te().toString(),releaseType:ee.Official,releaseVersion:`${t}-${$(1,3)}-${$(1,3)}-${$(6,10)}.${$(1e3,3e3)}`,tagNumber:K(),tagType:"SVN"},s=[{key:"All Config Entry.pdf",value:"56445"}],l=[{id:"N-1004",type:F.New,feature:"息记录新增表情分类，查找会话表情更便捷"},{id:"N-1005",type:F.Improve,feature:"会话中的图片、视频等文件，可使用“多选”批量保存"},{id:"N-1006",type:F.Improve,feature:"远程协助可自适应屏幕大小，自如缩放，操作更便捷"},{id:"N-1007",type:F.Fix,feature:"GIF热图新增搜索功能，热图便捷搜，斗图趣无穷"}],o=[{key:"Windows 10",value:"10.0.19044.2965"},{key:"Linux Redhat",value:"7.1.4 Rel"}],u={author:"Nate Ford",createDate:Date.now().toString(),description:"RoWarlock 最新释放",modifyDate:Date.now().toString(),taskId:Ne(),title:"RoWarlock 释放",basicInfos:r,relatedConfig:s,testEnv:o,content:l};return{year:t,releaseTask:u}}const Ee={class:"font-weight-bold ml-2"},Me={class:"font-weight-bold ml-2"},Oe=P({__name:"ReleaseNav",props:{releaseRecord:Array},emits:["selectSingleReleaseRecord"],setup(t,{emit:r}){const s=t,l=h(!1);let o=s.releaseRecord,u=Be(o);function V(_){r("selectSingleReleaseRecord",_)}return(_,c)=>(n(),m(re,{rail:l.value,onClick:c[1]||(c[1]=d=>l.value=!1),location:"right"},{default:a(()=>[e(W,{title:"释放记录","prepend-icon":"mdi-clipboard-list-outline"},{append:a(()=>[e(q,{variant:"text",icon:"mdi-chevron-left",onClick:c[0]||(c[0]=te(d=>l.value=!l.value,["stop"]))})]),_:1}),e(M),e(U,null,{default:a(()=>[(n(!0),S(I,null,L(y(u),(d,k)=>(n(),m(le,{class:"rounded-e-xl",key:k,"append-icon":"mdi-chevron-down"},{activator:a(({props:i})=>[e(W,se(oe(i)),{prepend:a(()=>[e(E,{class:"mr-0",color:"deep-purple-accent-4"},{default:a(()=>[g("mdi-sun-compass")]),_:1})]),title:a(()=>[e(R,{color:"blue-accent-2",class:"ml-2 text-h6 text-white rounded-e-xl"},{default:a(()=>[T("p",Ee,N(d.year),1)]),_:2},1024)]),_:2},1040)]),default:a(()=>[e(U,null,{default:a(()=>[(n(!0),S(I,null,L(d.items,(i,f)=>(n(),m(W,{onClick:p=>V(i),class:"py-0",key:f},{prepend:a(()=>[e(E,{class:"mr-0",color:"deep-purple-accent-4"},{default:a(()=>[g("mdi-alpha-t-box")]),_:1})]),title:a(()=>[e(R,{color:"blue-accent-2",class:"ml-2 text-body-2 text-white"},{default:a(()=>[T("p",Me,N(i.releaseTask.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rail"]))}}),G=P({__name:"CViewTextItemList",props:{values:{},color:{}},setup(t){const r=t;return(s,l)=>(n(),m(R,null,{default:a(()=>[(n(!0),S(I,null,L(r.values,(o,u)=>(n(),m(R,{class:"ma-2",key:u},{default:a(()=>[e(D,{prefield:o.prefield,values:o.values},null,8,["prefield","values"])]),_:2},1024))),128)),r.color?(n(),m(M,{key:0,thickness:1.5,class:"border-opacity-75",color:r.color},null,8,["color"])):z("",!0)]),_:1}))}});function We(t){switch(t){case"branchNumber":return"分支版本号:";case"isHotfix":return"是否热修复:";case"productName":return"产品名称:";case"releaseDate":return"发布日期:";case"releaseType":return"发布类型:";case"releaseVersion":return"发布版本号:";case"tagNumber":return"年度释放号:";case"tagType":return"分支类型:";default:return t}}function Ge(t){let r=[];return t.forEach((s,l)=>{r.push({prefield:`关联配置_${l+1}:`,label:s.key,values:s.value})}),r}function je(t){const r=t.reduce((s,l)=>{const{id:o,type:u,feature:V}=l,_=`${o} : ${V}`;return s[u]?s[u].push(_):s[u]=[_],s},{});return Object.entries(r).map(([s,l])=>({key:s,value:l}))}const ze={class:"text-overline mt-n2"},Ue=P({__name:"CViewContentListItem",props:{values:{},icon:{}},setup(t){return(r,s)=>(n(),m(R,{border:""},{default:a(()=>[(n(!0),S(I,null,L(r.values,(l,o)=>(n(),m(C,{class:"ma-0 d-flex",key:o},{default:a(()=>[o!==0?(n(),m(M,{key:0,thickness:2,class:"border-opacity-75 mx-4",color:"indigo-accent-4"})):z("",!0),e(b,{cols:"1",class:"pb-0"},{default:a(()=>[e(E,{color:"amber-accent-4",icon:r.icon,size:"x-small"},null,8,["icon"])]),_:1}),e(b,{class:"pb-0"},{default:a(()=>[T("div",ze,N(l),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))}}),He={class:"text-overline mr-4 pt-1"},Ye=P({__name:"CViewContentList",props:{prefield:{},values:{}},setup(t){return(r,s)=>(n(),m(R,null,{default:a(()=>[e(R,{class:"ma-2 d-flex"},{default:a(()=>[e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[T("div",He,N(r.prefield),1),e(Ue,{icon:"mdi-tag-multiple",values:r.values},null,8,["values"])]),_:1})]),_:1})]),_:1}),e(M,{thickness:2,class:"border-opacity-75",color:"deep-purple-accent-3"})]),_:1}))}}),qe=J({...ne(),...De()},"VForm"),Je=Q()({name:"VForm",props:qe(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,r){let{slots:s,emit:l}=r;const o=Fe(t),u=h();function V(c){c.preventDefault(),o.reset()}function _(c){const d=c,k=o.validate();d.then=k.then.bind(k),d.catch=k.catch.bind(k),d.finally=k.finally.bind(k),l("submit",d),d.defaultPrevented||k.then(i=>{var p;let{valid:f}=i;f&&((p=u.value)==null||p.submit())}),d.preventDefault()}return X(()=>{var c;return e("form",{ref:u,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:V,onSubmit:_},[(c=s.default)==null?void 0:c.call(s,o)])}),Z(o,u)}});const Qe=J({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ue({location:"bottom"}),...ce(),...ie(),...de(),...fe(),...pe(Ie({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Xe=Q()({name:"VSnackbar",props:Qe(),emits:{"update:modelValue":t=>!0},setup(t,r){let{slots:s}=r;const l=me(t,"modelValue"),{locationStyles:o}=ve(t),{positionClasses:u}=_e(t),{scopeId:V}=ke(),{themeClasses:_}=be(t),{colorClasses:c,colorStyles:d,variantClasses:k}=ye(t),{roundedClasses:i}=Ve(t),f=h();j(l,v),j(()=>t.timeout,v),ge(()=>{l.value&&v()});let p=-1;function v(){window.clearTimeout(p);const x=Number(t.timeout);!l.value||x===-1||(p=window.setTimeout(()=>{l.value=!1},x))}function O(){window.clearTimeout(p)}return X(()=>{const[x]=Y.filterProps(t);return e(Y,H({ref:f,class:["v-snackbar",{"v-snackbar--active":l.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--vertical":t.vertical},u.value,t.class],style:t.style},x,{modelValue:l.value,"onUpdate:modelValue":ae=>l.value=ae,contentProps:H({class:["v-snackbar__wrapper",_.value,c.value,i.value,k.value],style:[o.value,d.value],onPointerenter:O,onPointerleave:v},x.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},V),{default:()=>[he(!1,"v-snackbar"),s.default&&e("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[s.default()]),s.actions&&e(Re,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[e("div",{class:"v-snackbar__actions"},[s.actions()])]})],activator:s.activator})}),Z({},f)}}),Ke=T("p",{class:"ml-2"},"更多信息",-1),Ze=T("strong",null,"保存",-1),ea=P({__name:"ReleaseView",props:{releaseTask:{}},setup(t){const r=t,s=h(!1),l=h();let o=h({status:!1,text:"编辑",color:"primary",icon:"mdi-lock-outline"}),u=h([]),V=h([]),_=h([]),c=h([]);j(()=>r.releaseTask,i=>{l.value=i,u.value=[],V.value=[],c.value=[],_.value=Ge(i.relatedConfig);const f=Object.entries(i.basicInfos);for(const[v,O]of f){let x=We(v);u.value.push({prefield:x,values:O})}i.testEnv.forEach(v=>{V.value.push({prefield:v.key,values:v.value})}),je(i.content).forEach(v=>{c.value.push({prefield:v.key,values:v.value})})},{immediate:!1,deep:!0});function d(){console.log(o.value.status),o.value.status?(o.value={status:!o.value.status,text:"编辑",color:"primary",icon:"mdi-lock-outline"},s.value=!0):o.value={status:!o.value.status,text:"保存",color:"success",icon:"mdi-lock-open-outline"}}function k(i){}return(i,f)=>(n(),S(I,null,[e(w,{color:"grey-lighten-4",flat:"",class:"ma-2"},{default:a(()=>[e(Ce,{border:"",density:"compact"},{default:a(()=>[e($e,{icon:"mdi-record-player"}),e(xe,null,{default:a(()=>[g("释放记录")]),_:1}),e(Pe),e(q,{color:y(o).color,variant:"text",onClick:f[0]||(f[0]=p=>d())},{default:a(()=>[e(E,null,{default:a(()=>[g(N(y(o).icon),1)]),_:1}),g(" "+N(y(o).text),1)]),_:1},8,["color"])]),_:1}),e(w,{color:"white",flat:""},{default:a(()=>[l.value?(n(),m(Je,{key:1,disabled:!y(o).status},{default:a(()=>[e(C,null,{default:a(()=>[e(b,{cols:"8"},{default:a(()=>[e(D,{values:l.value.title,color:"deep-purple-accent-3",prefield:"任务名称:"},null,8,["values"])]),_:1}),e(b,null,{default:a(()=>[e(D,{values:l.value.author,color:"deep-purple-accent-3",prefield:"创建人:"},null,8,["values"])]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[e(D,{values:l.value.description,color:"deep-purple-accent-3",prefield:"任务描述:"},null,8,["values"])]),_:1}),e(b,null,{default:a(()=>[e(D,{values:l.value.taskId,color:"deep-purple-accent-3",prefield:"任务id:"},null,8,["values"])]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,{cols:"7"},{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(B,null,{default:a(()=>[g("基本信息")]),_:1}),e(A,null,{default:a(()=>[e(G,{values:y(u),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(B,null,{default:a(()=>[g("测试环境")]),_:1}),e(A,null,{default:a(()=>[e(G,{values:y(V),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1}),e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg mt-4"},{default:a(()=>[e(B,null,{default:a(()=>[g("关联设置")]),_:1}),e(A,null,{default:a(()=>[e(G,{values:y(_),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(B,null,{default:a(()=>[g("更新详情")]),_:1}),e(A,null,{default:a(()=>[e(C,null,{default:a(()=>[(n(!0),S(I,null,L(y(c),(p,v)=>(n(),m(b,{key:v,class:"px-0"},{default:a(()=>[e(Ye,{prefield:p.prefield,values:p.values},null,8,["prefield","values"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[e(R,{rounded:"",border:"",color:"blue-accent-2",class:"font-weight-bold",onClick:f[1]||(f[1]=p=>(l.value.taskId,void 0))},{default:a(()=>[Ke]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"])):(n(),m(R,{key:0}))]),_:1})]),_:1}),e(Xe,{location:"top right",timeout:1e3,color:"success",variant:"tonal",modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=p=>s.value=p)},{default:a(()=>[g(" 所有信息 "),Ze,g(" 成功. ")]),_:1},8,["modelValue"])],64))}}),ua=P({__name:"ReleaseMain",setup(t){const r=Le();let s=h({});function l(o){s.value=o.releaseTask}return(o,u)=>(n(),m(w,{flat:""},{default:a(()=>[e(Oe,{"release-record":y(r),onSelectSingleReleaseRecord:l},null,8,["release-record"]),y(s)?(n(),m(ea,{key:0,"release-task":y(s)},null,8,["release-task"])):z("",!0)]),_:1}))}});export{ua as default};
