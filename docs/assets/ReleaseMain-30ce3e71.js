import{d as $,l as g,o as n,c,w as a,a as e,am as J,A as te,h as W,p as B,f as N,g as L,J as y,F as I,e as z,av as se,aw as oe,B as re,C as ne,j as M,b as h,k as T,t as S,v as O,W as Q,X as ue,Y as X,$ as K,a6 as ce,a7 as ie,a8 as de,ap as fe,aa as pe,ax as me,aq as ve,ag as _e,ah as ke,ay as be,aj as ye,ar as Ve,ai as he,G,D as ge,au as xe,al as Re,z as H,az as Ce,m as we}from"./index-42e8e5d3.js";import{h as Te,i as P,b as Se,g as $e,r as Z,j as Ne,c as x,k as ee,m as Ie,l as Y,V as Pe}from"./forwardRefs-60d5580a.js";import{V as q,m as Fe,c as De}from"./VTextField-d4fa887c.js";import{V as R,a as b}from"./VRow-bc4d8854.js";import{V as Le}from"./VAppBarNavIcon-dae3ea79.js";import{V as w,a as A,b as E}from"./VCard-7daa29a0.js";var ae=(l=>(l.Official="Official",l.Test="Test",l.FieldTest="FieldTest",l))(ae||{}),F=(l=>(l.New="New",l.Improve="Improve",l.Fix="Fix",l))(F||{});function Be(){let l=Z(),s=Te(),o=[];return s.forEach(t=>{for(let r=0;r<l;r++)o.push(Ee(t))}),o}function Ae(l){return l.reduce((s,o)=>{const t=o.year;return s[t]||(s[t]={year:t,items:[]}),s[t].items.push(o),s},{})}function Ee(l){let s={branchNumber:P(49999,89999),isHotfix:Se(),productName:"RoWarlock",releaseDate:$e().toString(),releaseType:ae.Official,releaseVersion:`${l}-${P(1,3)}-${P(1,3)}-${P(6,10)}.${P(1e3,3e3)}`,tagNumber:Z(),tagType:"SVN"},o=[{key:"All Config Entry.pdf",value:"56445"}],t=[{id:"N-1004",type:F.New,feature:"息记录新增表情分类，查找会话表情更便捷"},{id:"N-1005",type:F.Improve,feature:"会话中的图片、视频等文件，可使用“多选”批量保存"},{id:"N-1006",type:F.Improve,feature:"远程协助可自适应屏幕大小，自如缩放，操作更便捷"},{id:"N-1007",type:F.Fix,feature:"GIF热图新增搜索功能，热图便捷搜，斗图趣无穷"}],r=[{key:"Windows 10",value:"10.0.19044.2965"},{key:"Linux Redhat",value:"7.1.4 Rel"}],u={author:"Nate Ford",createDate:Date.now().toString(),description:"RoWarlock 最新释放",modifyDate:Date.now().toString(),taskId:Ne(),title:"RoWarlock 释放",basicInfos:s,relatedConfig:o,testEnv:r,content:t};return{year:l,releaseTask:u}}const Me={class:"font-weight-bold ml-2"},Oe={class:"font-weight-bold ml-2"},Ue=$({__name:"ReleaseNav",props:{releaseRecord:Array},emits:["selectSingleReleaseRecord"],setup(l,{emit:s}){const o=l,t=g(!1);let r=o.releaseRecord,u=Ae(r);function V(_){s("selectSingleReleaseRecord",_)}return(_,i)=>(n(),c(se,{rail:t.value,onClick:i[1]||(i[1]=f=>t.value=!1),location:"right"},{default:a(()=>[e(W,{title:"释放记录","prepend-icon":"mdi-clipboard-list-outline"},{append:a(()=>[e(J,{variant:"text",icon:"mdi-chevron-left",onClick:i[0]||(i[0]=te(f=>t.value=!t.value,["stop"]))})]),_:1}),e(B),e(z,null,{default:a(()=>[(n(!0),N(I,null,L(y(u),(f,k)=>(n(),c(oe,{class:"rounded-e-xl",key:k,"append-icon":"mdi-chevron-down"},{activator:a(({props:d})=>[e(W,re(ne(d)),{prepend:a(()=>[e(M,{class:"mr-0",color:"deep-purple-accent-4"},{default:a(()=>[h("mdi-sun-compass")]),_:1})]),title:a(()=>[e(x,{color:"blue-accent-2",class:"ml-2 text-h6 text-white rounded-e-xl"},{default:a(()=>[T("p",Me,S(f.year),1)]),_:2},1024)]),_:2},1040)]),default:a(()=>[e(z,null,{default:a(()=>[(n(!0),N(I,null,L(f.items,(d,p)=>(n(),c(W,{onClick:m=>V(d),class:"py-0",key:p},{prepend:a(()=>[e(M,{class:"mr-0",color:"deep-purple-accent-4"},{default:a(()=>[h("mdi-alpha-t-box")]),_:1})]),title:a(()=>[e(x,{color:"blue-accent-2",class:"ml-2 text-body-2 text-white"},{default:a(()=>[T("p",Oe,S(d.releaseTask.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rail"]))}}),We={class:"text-body-2 mr-4 pt-3 font-weight-bold"},D=$({__name:"CViewTextItem",props:{color:{},label:{},prefield:{},values:{}},setup(l){const s=l;return(o,t)=>(n(),c(x,null,{default:a(()=>[e(x,{class:"ma-2 d-flex"},{default:a(()=>[T("div",We,S(s.prefield),1),s.label?(n(),c(q,{key:1,density:"compact","hide-details":"auto",placeholder:s.prefield,label:s.label,variant:"outlined",modelValue:s.values,"onUpdate:modelValue":t[1]||(t[1]=r=>s.values=r),clearable:!0},null,8,["placeholder","label","modelValue"])):(n(),c(q,{key:0,density:"compact","hide-details":"auto",placeholder:s.prefield,variant:"outlined",modelValue:s.values,"onUpdate:modelValue":t[0]||(t[0]=r=>s.values=r),clearable:!0},null,8,["placeholder","modelValue"]))]),_:1}),s.color?(n(),c(B,{key:0,thickness:2,class:"border-opacity-75",color:s.color},null,8,["color"])):O("",!0)]),_:1}))}}),j=$({__name:"CViewTextItemList",props:{values:{},color:{}},setup(l){const s=l;return(o,t)=>(n(),c(x,null,{default:a(()=>[(n(!0),N(I,null,L(s.values,(r,u)=>(n(),c(x,{class:"ma-2",key:u},{default:a(()=>[e(D,{prefield:r.prefield,values:r.values},null,8,["prefield","values"])]),_:2},1024))),128)),s.color?(n(),c(B,{key:0,thickness:1.5,class:"border-opacity-75",color:s.color},null,8,["color"])):O("",!0)]),_:1}))}});function je(l){switch(l){case"branchNumber":return"分支版本号:";case"isHotfix":return"是否热修复:";case"productName":return"产品名称:";case"releaseDate":return"发布日期:";case"releaseType":return"发布类型:";case"releaseVersion":return"发布版本号:";case"tagNumber":return"年度释放号:";case"tagType":return"分支类型:";default:return l}}function Ge(l){let s=[];return l.forEach((o,t)=>{s.push({prefield:`关联配置_${t+1}:`,label:o.key,values:o.value})}),s}function ze(l){const s=l.reduce((o,t)=>{const{id:r,type:u,feature:V}=t,_=`${r} : ${V}`;return o[u]?o[u].push(_):o[u]=[_],o},{});return Object.entries(s).map(([o,t])=>({key:o,value:t}))}const He={class:"text-overline mt-n2"},Ye=$({__name:"CViewContentListItem",props:{values:{},icon:{}},setup(l){return(s,o)=>(n(),c(x,{border:""},{default:a(()=>[(n(!0),N(I,null,L(s.values,(t,r)=>(n(),c(R,{class:"ma-0 d-flex",key:r},{default:a(()=>[r!==0?(n(),c(B,{key:0,thickness:2,class:"border-opacity-75 mx-4",color:"indigo-accent-4"})):O("",!0),e(b,{cols:"1",class:"pb-0"},{default:a(()=>[e(M,{color:"amber-accent-4",icon:s.icon,size:"x-small"},null,8,["icon"])]),_:1}),e(b,{class:"pb-0"},{default:a(()=>[T("div",He,S(t),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))}}),qe={class:"text-overline mr-4 pt-1"},Je=$({__name:"CViewContentList",props:{prefield:{},values:{}},setup(l){return(s,o)=>(n(),c(x,null,{default:a(()=>[e(x,{class:"ma-2 d-flex"},{default:a(()=>[e(R,null,{default:a(()=>[e(b,null,{default:a(()=>[T("div",qe,S(s.prefield),1),e(Ye,{icon:"mdi-tag-multiple",values:s.values},null,8,["values"])]),_:1})]),_:1})]),_:1}),e(B,{thickness:2,class:"border-opacity-75",color:"deep-purple-accent-3"})]),_:1}))}}),Qe=Q({...ue(),...Fe()},"VForm"),Xe=X()({name:"VForm",props:Qe(),emits:{"update:modelValue":l=>!0,submit:l=>!0},setup(l,s){let{slots:o,emit:t}=s;const r=De(l),u=g();function V(i){i.preventDefault(),r.reset()}function _(i){const f=i,k=r.validate();f.then=k.then.bind(k),f.catch=k.catch.bind(k),f.finally=k.finally.bind(k),t("submit",f),f.defaultPrevented||k.then(d=>{var m;let{valid:p}=d;p&&((m=u.value)==null||m.submit())}),f.preventDefault()}return K(()=>{var i;return e("form",{ref:u,class:["v-form",l.class],style:l.style,novalidate:!0,onReset:V,onSubmit:_},[(i=o.default)==null?void 0:i.call(o,r)])}),ee(r,u)}});const Ke=Q({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ce({location:"bottom"}),...ie(),...de(),...fe(),...pe(),...me(Ie({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ze=X()({name:"VSnackbar",props:Ke(),emits:{"update:modelValue":l=>!0},setup(l,s){let{slots:o}=s;const t=ve(l,"modelValue"),{locationStyles:r}=_e(l),{positionClasses:u}=ke(l),{scopeId:V}=be(),{themeClasses:_}=ye(l),{colorClasses:i,colorStyles:f,variantClasses:k}=Ve(l),{roundedClasses:d}=he(l),p=g();G(t,v),G(()=>l.timeout,v),ge(()=>{t.value&&v()});let m=-1;function v(){window.clearTimeout(m);const C=Number(l.timeout);!t.value||C===-1||(m=window.setTimeout(()=>{t.value=!1},C))}function U(){window.clearTimeout(m)}return K(()=>{const[C]=Y.filterProps(l);return e(Y,H({ref:p,class:["v-snackbar",{"v-snackbar--active":t.value,"v-snackbar--multi-line":l.multiLine&&!l.vertical,"v-snackbar--vertical":l.vertical},u.value,l.class],style:l.style},C,{modelValue:t.value,"onUpdate:modelValue":le=>t.value=le,contentProps:H({class:["v-snackbar__wrapper",_.value,i.value,d.value,k.value],style:[r.value,f.value],onPointerenter:U,onPointerleave:v},C.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},V),{default:()=>[xe(!1,"v-snackbar"),o.default&&e("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[o.default()]),o.actions&&e(Re,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[e("div",{class:"v-snackbar__actions"},[o.actions()])]})],activator:o.activator})}),ee({},p)}}),ea=T("p",{class:"ml-2"},"更多信息",-1),aa=T("strong",null,"保存",-1),la=$({__name:"ReleaseView",props:{releaseTask:{}},setup(l){const s=l,o=g(!1),t=g();let r=g({status:!1,text:"编辑",color:"primary",icon:"mdi-lock-outline"}),u=g([]),V=g([]),_=g([]),i=g([]);G(()=>s.releaseTask,d=>{t.value=d,u.value=[],V.value=[],i.value=[],_.value=Ge(d.relatedConfig);const p=Object.entries(d.basicInfos);for(const[v,U]of p){let C=je(v);u.value.push({prefield:C,values:U})}d.testEnv.forEach(v=>{V.value.push({prefield:v.key,values:v.value})}),ze(d.content).forEach(v=>{i.value.push({prefield:v.key,values:v.value})})},{immediate:!1,deep:!0});function f(){console.log(r.value.status),r.value.status?(r.value={status:!r.value.status,text:"编辑",color:"primary",icon:"mdi-lock-outline"},o.value=!0):r.value={status:!r.value.status,text:"保存",color:"success",icon:"mdi-lock-open-outline"}}function k(d){}return(d,p)=>(n(),N(I,null,[e(w,{color:"grey-lighten-4",flat:"",class:"ma-2"},{default:a(()=>[e(Ce,{border:"",density:"compact"},{default:a(()=>[e(Le,{icon:"mdi-record-player"}),e(we,null,{default:a(()=>[h("释放记录")]),_:1}),e(Pe),e(J,{color:y(r).color,variant:"text",onClick:p[0]||(p[0]=m=>f())},{default:a(()=>[e(M,null,{default:a(()=>[h(S(y(r).icon),1)]),_:1}),h(" "+S(y(r).text),1)]),_:1},8,["color"])]),_:1}),e(w,{color:"white",flat:""},{default:a(()=>[t.value?(n(),c(Xe,{key:1,disabled:!y(r).status},{default:a(()=>[e(R,null,{default:a(()=>[e(b,{cols:"8"},{default:a(()=>[e(D,{values:t.value.title,color:"deep-purple-accent-3",prefield:"任务名称:"},null,8,["values"])]),_:1}),e(b,null,{default:a(()=>[e(D,{values:t.value.author,color:"deep-purple-accent-3",prefield:"创建人:"},null,8,["values"])]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(b,null,{default:a(()=>[e(D,{values:t.value.description,color:"deep-purple-accent-3",prefield:"任务描述:"},null,8,["values"])]),_:1}),e(b,null,{default:a(()=>[e(D,{values:t.value.taskId,color:"deep-purple-accent-3",prefield:"任务id:"},null,8,["values"])]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(b,{cols:"7"},{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(A,null,{default:a(()=>[h("基本信息")]),_:1}),e(E,null,{default:a(()=>[e(j,{values:y(u),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(A,null,{default:a(()=>[h("测试环境")]),_:1}),e(E,null,{default:a(()=>[e(j,{values:y(V),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1}),e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg mt-4"},{default:a(()=>[e(A,null,{default:a(()=>[h("关联设置")]),_:1}),e(E,null,{default:a(()=>[e(j,{values:y(_),color:"deep-purple-accent-3"},null,8,["values"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(b,null,{default:a(()=>[e(w,{variant:"outlined",color:"indigo-accent-4",class:"rounded-lg"},{default:a(()=>[e(A,null,{default:a(()=>[h("更新详情")]),_:1}),e(E,null,{default:a(()=>[e(R,null,{default:a(()=>[(n(!0),N(I,null,L(y(i),(m,v)=>(n(),c(b,{key:v,class:"px-0"},{default:a(()=>[e(Je,{prefield:m.prefield,values:m.values},null,8,["prefield","values"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(b,null,{default:a(()=>[e(x,{rounded:"",border:"",color:"blue-accent-2",class:"font-weight-bold",onClick:p[1]||(p[1]=m=>(t.value.taskId,void 0))},{default:a(()=>[ea]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"])):(n(),c(x,{key:0}))]),_:1})]),_:1}),e(Ze,{location:"top right",timeout:1e3,color:"success",variant:"tonal",modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=m=>o.value=m)},{default:a(()=>[h(" 所有信息 "),aa,h(" 成功. ")]),_:1},8,["modelValue"])],64))}}),ca=$({__name:"ReleaseMain",setup(l){const s=Be();let o=g({});function t(r){o.value=r.releaseTask}return(r,u)=>(n(),c(w,{flat:""},{default:a(()=>[e(Ue,{"release-record":y(s),onSelectSingleReleaseRecord:t},null,8,["release-record"]),y(o)?(n(),c(la,{key:0,"release-task":y(o)},null,8,["release-task"])):O("",!0)]),_:1}))}});export{ca as default};
